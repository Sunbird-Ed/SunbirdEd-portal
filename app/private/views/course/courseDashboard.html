<div class="ui grid">
  <div class="twelve wide column ">
    <a class="ui item basic icon circular float-ContentRight" href="Javascript:void(0);" data-tooltip="Close the dashboard">
			<i class="ui remove icon CloseButtonFont" ng-click="toc.showCourseDashboard = false;courseDashboard.resetDropdown();" ></i>
		</a>
  </div>
</div>
<div class="ui grid">
  <div class="five wide column left floated">
    <p class="dashboard-label ng-binding">Course progress dashboard</p>
  </div>
  <div class="four wide column left floated"></div>
  <!-- Check logged user is COURSE_ADMIN, and COURSE_CREATOR else hide progress,consumption dropdown-->
  <div class="three wide column right floated" ng-if="courseDashboard.bothRolesUser">
    <div class="right floated three wide column padding-right-dropdown">
      <div class="ui dropdown float-ContentRight" id="courseDropdownMenu" ng-init="courseDashboard.initDropdwon()">
        <div class="text dashBoardSectionHeading">{{courseDashboard.selectedDataset}}</div>
        <i class="dropdown icon"></i>
        <div class="menu">
          <div class="active item" data-value="1" data-dataset="progress" ng-click="courseDashboard.onAfterDatasetChange($event.target)" sb-permissions permission-only="COURSE_ADMIN">Progress</div>
          <div class="item" data-value="0" data-dataset="consumption" ng-click="courseDashboard.onAfterDatasetChange($event.target)" sb-permissions permission-only="COURSE_CREATOR">Consumption</div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="ui grid margin-top-10" ng-if="!courseDashboard.showError">
  <div class="six wide column">
    <div class="ui text menu float-ContentLeft padding-top-10">
      <span class="dashBoardMenuItem cursor-pointer active" data-timeperiod="7d" data-timeperiod-text="7 days" ng-class="{active:courseDashboard.timePeriod === '7d'}" ng-click="courseDashboard.onAfterFilterChange($event.target)">LAST 7 DAYS</span>&nbsp;&nbsp;&nbsp;&nbsp;
      <span class="dashBoardMenuItem cursor-pointer" data-timeperiod="14d" data-timeperiod-text="14 days" ng-class="{active:courseDashboard.timePeriod === '14d'}" ng-click="courseDashboard.onAfterFilterChange($event.target)">LAST 14 DAYS</span>&nbsp;&nbsp;&nbsp;&nbsp;
      <span class="dashBoardMenuItem cursor-pointer" data-timeperiod="5w" data-timeperiod-text="5 weeks" ng-class="{active:courseDashboard.timePeriod === '5w'}" ng-click="courseDashboard.onAfterFilterChange($event.target)">LAST 5 WEEKS</span>&nbsp;&nbsp;&nbsp;&nbsp;
    </div>
  </div>
  <div class="two wide column"></div>
  <!--<div class="four wide column" ng-show="courseDashboard.selectedDataset == 'progress'">
    <div class="ui category search float-ContentRight">
      <div class="ui icon input">
        <input class="search-course-data ng-pristine ng-valid ng-empty ng-touched" type="text" placeholder="Search ..." ng-model="courseDashboard.searchUser" autocomplete="off">
        <i class="search icon"></i>
      </div>
    </div>
  </div>-->
</div>
<div class="table-data-holder" ng-hide="courseDashboard.showLoader" ng-if="!courseDashboard.showError && courseDashboard.selectedDataset === 'progress'">
  <div class="ui raised segment">
    <div class="eight wide column right floated">
      <!-- Inline css-->
      <h3>Stats for last {{courseDashboard.filterQueryTextMsg}} </h3>
    </div>
    <table class="ui very basic courseDashBoardTable table">
      <thead>
        <tr>
          <th class="table-headerDashboard">
            <a href="Javascript:void(0);" ng-click="courseDashboard.orderByField='progress'; courseDashboard.reverseSort = !courseDashboard.reverseSort">Status
							<span ng-show="courseDashboard.orderByField == 'progress'">
		        				<span ng-show="!courseDashboard.reverseSort">^</span>
		        				<span ng-show="courseDashboard.reverseSort">v</span>
							</span>
						</a>
          </th>
          <th>
            <a href="Javascript:void(0);" ng-click="courseDashboard.orderByField='user'; courseDashboard.reverseSort = !courseDashboard.reverseSort">User Name
		        			<span ng-show="courseDashboard.orderByField == 'user'">
		        				<span ng-show="!courseDashboard.reverseSort">^</span>
		        				<span ng-show="courseDashboard.reverseSort">v</span>
		        			</span>
				  		</a>
          </th>
          <th>
            <a href="Javascript:void(0);" ng-click="courseDashboard.orderByField='batchEndsOn'; courseDashboard.reverseSort = !courseDashboard.reverseSort">batch end on
				          	<span ng-show="courseDashboard.orderByField == 'batchEndsOn'">
				          		<span ng-show="!courseDashboard.reverseSort">^</span>
				          		<span ng-show="courseDashboard.reverseSort">v</span>
				          	</span>
						</a>
          </th>
          <th>
            <a href="Javascript:void(0);" ng-click="courseDashboard.orderByField='org'; courseDashboard.reverseSort = !courseDashboard.reverseSort">ORG
			          		<span ng-show="courseDashboard.orderByField == 'org'">
			          			<span ng-show="!courseDashboard.reverseSort">^</span>
			          			<span ng-show="courseDashboard.reverseSort">v</span>
			          		</span>
						</a>
          </th>
          <th>
            <a href="Javascript:void(0);" ng-click="courseDashboard.orderByField='enrolledOn'; courseDashboard.reverseSort = !courseDashboard.reverseSort">Enrolled on
	          				<span ng-show="courseDashboard.orderByField == 'enrolledOn'">
	          					<span ng-show="!courseDashboard.reverseSort">^</span>
	          					<span ng-show="courseDashboard.reverseSort">v</span>
	          				</span>
				  		</a>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="student in courseDashboard.courseProgressArray|orderBy:courseDashboard.orderByField:courseDashboard.reverseSort | filter:courseDashboard.searchUser">
          <!-- If course progress is 100%-->
          <td ng-if="student.progress === 100">Done</td>
          <td class="ui green header text-font" ng-if="(student.progress !== 100 && student.progress > 90)">{{student.progress}}%</td>
          <td class="ui orange header text-font" ng-if="(student.progress !== 100 && student.progress > 30)">{{student.progress}}%</td>
          <td class="ui red header text-font" ng-if="(student.progress !== 100 && student.progress < 30)">{{student.progress}}%</td>
          <td>{{student.userName}}
            <!--<br>Last login: {{student.lastAccessTime | date:'shortTime'}}-->
          </td>
          <td>{{student.batchEndsOn | date:'MMM d, y'}}</td>
          <td>{{student.org}}</td>
          <td>{{student.enrolledOn | date:'MMM d, y'}}</td>
        </tr>
        <tr ng-show="courseDashboard.courseProgressArray.length == 0">
          <td id="nofoundop">
            please select operator
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="ui grid">
    <div class="twelve wide column right floated">
      <p class="text-align-right">Download this view as:
        <a href="Javascript:void(0);" class="item text-decoration-underline">CSV</a>
        <a href="Javascript:void(0);" class="item text-decoration-underline">PDF</a>
        <a href="Javascript:void(0);" class="item text-decoration-underline">DOC</a>
      </p>
    </div>
  </div>
</div>
<!-- Course consumption dashboard -->
<div class="consumption-data-holder" ng-if="courseDashboard.selectedDataset == 'consumption' && !courseDashboard.showError">
  <div class="ui four cards">
    <div class="card" ng-repeat="item in courseDashboard.consumptionNumericData">
      <div class="content center aligned">
        <div class="meta dashBoardCardText">{{item.name}}</div>
        <h2 class="description dashboardCardSubText">{{item.value}}</h2>
      </div>
    </div>
  </div>
  <div class="ui one column grid">
    <div class="column">
      <canvas height="{{courseDashboard.chartHeight}}" id="line" class="chart chart-line adminCanvasPadding adminCanvasBorder" chart-data="courseDashboard.data" chart-series="courseDashboard.series" chart-labels="courseDashboard.labels" chart-colors="colors" chart-options="courseDashboard.options">
      </canvas>
    </div>
  </div>
</div>
<!-- End-->
<!-- Show loader-->
<div class="tweleve wide column" ng-if="courseDashboard.showLoader">
  <app-loader></app-loader>
</div>
<div class="ui negative message" ng-if="courseDashboard.showError && !courseDashboard.showLoader">
  <div class="header">
    Error while fetching data..
  </div>
  <p>{{courseDashboard.errorMsg}}</p>
</div>
