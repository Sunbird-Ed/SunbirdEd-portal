<div class="ui modal large announcementDetailsModal" ng-init="createAnn.init();" id="createAnnouncementModal">
<<<<<<< HEAD
  <i class="close icon" ng-click="closePopup()"></i>
=======
  <i class="close icon"></i>
>>>>>>> nit-origin/SB-867-announcement-refactor
  <div class=" ui segment margin-top-10">
    <div class=" margin-bottom-15">
      <div class="ui grid">
        <div class="ten wide column">
          <span class="ui header">
            <span class="ui" ng-if="createAnn.stepNumber === 1">
              <span class="text announcementHeadingSection" ng-if="!createAnn.editAction">{{$root.frmelmnts.lbl.createnewanncmnt}} </span>
              <span class="text announcementHeadingSection" ng-if="createAnn.editAction">{{$root.frmelmnts.lbl.anncmntttlresend}} </span>
          <br/>
          <span class="createAnnHeaderDesc">{{ createAnn.editAction? $root.frmelmnts.lbl.resendanncmntdesc : $root.frmelmnts.lbl.createnewanncmntdesc}}</span>
          <span class="createAnnHeaderDesc">{{$root.frmelmnts.instn.t0054}}</span>
          </span>
          <span class="ui" ng-if="createAnn.stepNumber === 2">
              <span class="text announcementHeadingSection">{{$root.frmelmnts.lbl.selectrecipient}}</span>
          <br/>
          <span class="createAnnHeaderDesc">{{ createAnn.editAction ? $root.frmelmnts.lbl.editrecipientdesc : $root.frmelmnts.lbl.selectrecipientdesc}}</span>
          </span>
          <span ng-if="createAnn.stepNumber === 3">
              <span class="text announcementHeadingSection">{{ createAnn.editAction ? $root.frmelmnts.lbl.selectrecipient: $root.frmelmnts.lbl.confirmrecipient}}</span>
          <br/>
          <span class="createAnnHeaderDesc">{{createAnn.editAction ? $root.frmelmnts.lbl.editrecipientdesc : $root.frmelmnts.lbl.confirmrecipientdesc}}</span>
          </span>
          <span ng-show="createAnn.stepNumber === 4">
              <span class="text announcementHeadingSection">{{$root.frmelmnts.lbl.previewanncmnt}}</span>
          <br/>
          <span class="createAnnHeaderDesc">{{$root.frmelmnts.lbl.previewanncmntdesc}}</span>
          </span>
          </span>
        </div>
        <div class="two wide column">
          <div class="createAnnStepsIndicator">
            <h6 class="createAnnMargin5 createAnnGrayShade">{{$root.frmelmnts.lbl.anncmntstep}}</h6> &nbsp
            <span id="announcementSteps createAnnMargin4" class="announcementSteps">{{createAnn.stepNumber}}</span><span class="createAnnGrayShade"> / 4</span>
          </div>
        </div>
      </div>
    </div>
    <div class="content">{{createAnn.isMetaModified}}
      <form class="ui form announcementForm" name="announcementForm">
        <div class="ui grid" ng-if="createAnn.stepNumber === 1">
          <div class="eight wide column">
            <div class="field createAnnFormScroller">
              <div class="padding-right-25">
                <div class="field required">
                  <label>{{$root.frmelmnts.lbl.anncmnttitle}}</label>
                  <div class="field form-group dropdown-margin-left" ng-required="true">
                    <input type="text" name="title" id="announcementTitle" placeholder="{{$root.frmelmnts.instn.t0049}}" ng-model="createAnn.announcement.details.title" ng-maxlength="100" ng-change="createAnn.enableRecepientBtn()">
                    <section ng-if="createAnn.announcement.details.title.length" class="float-ContentRight">{{createAnn.announcement.details.title.length}} / 100</section>
                    <p ng-show="announcementForm.title.$error.maxlength" class="createAnnErrorMsg">Title is too long</p>
                  </div>
                </div>
                 <div class="field required dropdown-margin-left">
                  <label>{{$root.frmelmnts.lbl.anncmntfrom}}</label>
                  <div class="field">
                    <input type="text" name="from" placeholder="{{$root.frmelmnts.lbl.anncmntfromDesc}}" ng-model="createAnn.announcement.details.from" ng-change="createAnn.enableRecepientBtn()">
                  </div>
                </div>
                <div class="field required dropdown-margin-left">
                  <label>{{$root.frmelmnts.lbl.anncmnttype}}</label>
                  <select name="medium" class="ui fluid dropdown" id="announcementType" ng-options=" audience for audience in createAnn.announcementType" ng-model="createAnn.announcement.details.type">
                    <option value="">{{$root.frmelmnts.instn.t0051}}</option>
                  </select>
                </div>
                <div class="field dropdown-margin-left">
                  <label>{{$root.frmelmnts.lbl.anncmntdesc}}</label>
                  <div class="field">
                    <input type="text" name="description" placeholder="{{$root.frmelmnts.instn.t0052}}" ng-model="createAnn.announcement.details.description" ng-maxlength="1200" ng-change="createAnn.enableRecepientBtn()">
                    <section ng-if="createAnn.announcement.details.description.length" class="float-ContentRight">{{createAnn.announcement.details.description.length}} / 1200</section>
                    <p class="createAnnErrorMsg" ng-show='announcementForm.description.$error.maxlength'>Description is too long.
                    </p>
                  </div>
                </div>
                <div class="field form-group dropdown-margin-left" ng-if="createAnn.showUrlField">
                  <label>{{$root.frmelmnts.lbl.anncmntlink}}</label>
                  <div class="field" data-ng-repeat="weblink in createAnn.repeatableWebLinks">
                    <div class="ui action input">
                      <input type="url" ng-model="createAnn.announcement.links[$index]" name="link_{{$index}}" placeholder="{{$root.frmelmnts.instn.t0053}}" ng-change="createAnn.enableRecepientBtn()">
                      <i class="trash icon createAnnBlueClass margin-top-10 cursor-pointer" ng-click="createAnn.removeLink($index)"></i>
                    </div>
                    <section ng-show="announcementForm['link_' + $index].$error.url" class="createAnnErrorMsg">Not a valid URL</section>
                  </div>
                </div>
                <div class="field">
                  <span ng-click="createAnn.addNewLink()">
                        <i class="plus icon createAnnBlueClass cursor-pointer"></i>
                        <span ng-if="!createAnn.showUrlField">
                          <span class="cursor-pointer createAnnBlueClass">{{$root.frmelmnts.lbl.anncmntaddlink}} </span><span>{{$root.frmelmnts.lbl.anncmntaddlinkdesc}}</span>
                  </span>
                  <span ng-if="createAnn.showUrlField">
                          <span class="cursor-pointer createAnnBlueClass">{{$root.frmelmnts.lbl.anncmntaddmorelink}}</span>
                  </span>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div class="four wide column createAnnAttchementHolder" ng-init="createAnn.initializeFileUploader()">
            <div class="field">
              <label>{{$root.frmelmnts.lbl.anncmntuploadfile}}</label>
              <div fine-uploader></div>
            </div>
          </div>
        </div>
        <div ng-if="createAnn.stepNumber === 2">
            <parent config="createAnn.config">
              <geo></geo>
            </parent>
        </div>
        <div ng-if="createAnn.stepNumber === 3" class="ui list ui grid">
          <div class="eight wide column createAnnFormScroller">
            <div class="ui message padding-10" ng-repeat="item in createAnn.announcement.selTar">
              <i class="close icon" ng-click='createAnn.removeRecipients(item)'></i>
              <span class="createAnnSelectedRecepient">{{item.location}}</span>
            </div>
          </div>
        </div>
        <div ng-if="createAnn.stepNumber === 4" class="ui grid">
          <div class="box width-100 eight wide column margin-left-17 createAnnFormScroller">
            <announcement-details-directive announcement-details="createAnn.announcement"></announcement-details-directive>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="actions">
    <button class="ui primary basic button announcementButton createAnnBackBtnWidth float-ContentLeft" id="annBackBtn" ng-hide="createAnn.stepNumber === 1" ng-click="createAnn.goToBackStep()" data-current-state="{{createAnn.stepNumber}}">
      <span class="announcementButtonText">{{$root.frmelmnts.btn.back}}</span>
    </button>
    <div class="ui primary button" ng-if="createAnn.stepNumber === 2" ng-click="createAnn.goToNextStep()">{{$root.frmelmnts.btn.anncmntconfirmrecipients}}</div>
    <div class="ui primary button" ng-if="createAnn.stepNumber === 3" ng-click="createAnn.goToNextStep()">{{$root.frmelmnts.btn.anncmntpreview}}</div>
    <div class="ui primary button" ng-if="createAnn.stepNumber === 4 && !createAnn.editAction" id="sendAnnouncement" ng-click="createAnn.saveAnnouncement(createAnn.data)">{{$root.frmelmnts.btn.anncmntsendanncmnt}}</div>
    <div class="ui primary button" ng-if="createAnn.stepNumber === 4 && createAnn.editAction" id="resendAnnouncement" ng-click="createAnn.resendAnnouncement(createAnn.data)">{{$root.frmelmnts.btn.anncmntsendanncmnt}}</div>
    <div ng-if="createAnn.stepNumber === 1" id="selectRecipientBtn" class="ui primary button" ng-class="{'disabled': createAnn.disableBtn === true || announcementForm.$invalid}" ng-click="createAnn.goToNextStep()" >{{ createAnn.editAction ? $root.frmelmnts.btn.anncmnteditrecipients : $root.frmelmnts.btn.anncmntselectrecipients}}</div>
  </div>
</div>
<ng-include="'views/announcement/announcementResendSuccess.html'">
<ng-include="'views/announcement/announcementCreateSuccess.html'">
<ng-include="'views/announcement/announcementCancel.html'">



