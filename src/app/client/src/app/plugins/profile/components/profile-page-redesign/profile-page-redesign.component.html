<div *ngIf="userProfile">
  <section class="pb-30 d-flex flex-ai-center flex-dc">
    <div class="ui container">
      <div class=" mb-15 d-flex flex-jc-center position-relative">
        <ngx-avatar 
          class="profile-avatar"
          [style]="avtarStyle"
          [size]="92" 
          initialsSize="1" 
          name="{{userProfile.firstName}}"
          round="true">
        </ngx-avatar>
        <div 
          class="ui primary  dropdown button right-aligned-button computer only" 
          *ngIf='permissionService.permissionAvailable'
          appPermission [permission]='adminActions'>
          <sui-select [placeholder]="'Admin Actions'" [(ngModel)]="adminActionSelectedOption" (ngModelChange)="onChange()">
            <sui-select-option *ngFor="let type of adminActionDropDownOptions" [value]="type"></sui-select-option>
          </sui-select>
        </div>
      </div>
    </div>
    <div class="fs-2-57 font-w-bold mb-15 text-ac">{{userProfile.firstName}} {{userProfile.lastName}}</div>
    <div class="mb-15 text-ac profile-label-container" *ngIf="roles && roles.length > 0">
      <span class="ui dodger-blue basic label mr-15 mt-5" *ngFor="let role of roles | slice:0:showMoreRolesLimit">{{role}}</span>
    </div>
    <div *ngIf="roles.length > defaultShowMoreRolesLimit">
      <div class="fs-1 color-2 mb-10 font-w-bold cursor-pointer fs-0-92" *ngIf="showMoreRoles" (click)="toggle(true)" tabindex="0">+ {{roles.length -
          defaultShowMoreRolesLimit}} {{resourceService.frmelmnts.lbl.more}}
        <i class="chevron down icon"></i>
      </div>
      <div class="fs-1 color-2 mb-10 font-w-bold cursor-pointer fs-0-92" (click)="toggle(false)" *ngIf="!showMoreRoles" tabindex="0">{{resourceService.frmelmnts.lbl.showLess}}
        <i class="chevron up icon"></i>
      </div>
    </div>
    <div class="fs-1-429 font-w-bold mb-10 text-ac" *ngIf=" orgDetails && orgDetails.orgName">{{orgDetails.orgName}}</div>
    <!-- {{getLocationDetails('block')}} -->
    <div class="m-0 pl-0" *ngIf=" orgDetails && orgDetails.locations">
      <div class="mb-0 d-flex flex-jc-center m-responsive-flex-dc fs-1-286" *ngIf="getLocationDetails(orgDetails.locations, 'block')">
        <span class="min-w-90 text-ac">Block :</span>
        <span class="text-ac">{{getLocationDetails(orgDetails.locations, 'block')}}</span>
      </div>
      <div class="mb-0 d-flex flex-jc-center m-responsive-flex-dc fs-1-286">
        <span class="min-w-90 text-ac">District :</span>
        <span class="text-ac">{{getLocationDetails(orgDetails.locations, 'district')}},
          {{getLocationDetails(orgDetails.locations, 'state')}}</span>
      </div>
    </div>
  </section>

  <section class="pt-30 pb-30 d-flex flex-jc-center profile-bg-c-3" *ngIf="userProfile.email || userProfile.phone">
    <div class="d-flex flex-dc">
      <div class="d-flex flex-jc-center">
        <div class="ui semi-circular dodger-blue basic label mb-15 fs-1-143" *ngIf="userProfile.phone">
          <i class="phone blue icon mr-5 "></i> +91 {{userProfile.phone}}
        </div>
      </div>
      <div class="ui semi-circular dodger-blue basic label fs-1-143" *ngIf="userProfile.email">
        <i class="mail icon mr-5"></i> {{userProfile.email}}
      </div>
    </div>
  </section>



  <section class="d-flex flex-ai-center flex-dc pt-30 pb-30 profile-bg-c-4">
    <!-- User info computer view starts-->
    <div class="ui container">
      <div class=" mb-15 d-flex flex-jc-center position-relative">
        <div class="max-w-400 computer only">
          <div class="mb-15 d-flex ">
            <span class="fs-1-16 min-w-90">{{resourceService.frmelmnts.lbl.boards}} :</span>
            <span class="fs-1-3 font-w-bold" *ngIf="userProfile.framework">{{convertToString(userProfile.framework.boards)}}</span>
          </div>
          <div class="mb-15 d-flex">
            <span class="fs-1-16 min-w-90">{{resourceService.frmelmnts.lbl.medium}} :</span>
            <span class="fs-1-3 font-w-bold" *ngIf="userProfile.framework">{{convertToString(userProfile.framework.medium)}}</span>
          </div>
          <div class="mb-15 d-flex">
            <span class="fs-1-16 min-w-90">{{resourceService.frmelmnts.lbl.subjects}} :</span>
            <span class="fs-1-3 font-w-bold" *ngIf="userProfile.framework">{{convertToString(userProfile.framework.subjects)}}</span>
          </div>
          <div class="d-flex">
            <span class="fs-1-16 min-w-90">{{resourceService.frmelmnts.lbl.classes}} :</span>
            <span class="fs-1-3 font-w-bold" *ngIf="userProfile.framework">{{convertToString(userProfile.framework.grades)}}</span>
          </div>

        </div>
        <button class="ui semi-circular dodger-blue button profile-edit-button center-aligned-button computer only"
          (click)="showEdit = true">{{resourceService.frmelmnts.lbl.edit}}</button>
      </div>

    </div>
    <!-- User info computer view ends-->

    <!-- User info mobile view starts-->
    <div class="max-w-300 mobile only">
      <div class="mb-15 d-flex flex-ai-center flex-dc">
        <span class="fs-1-16">{{resourceService.frmelmnts.lbl.boards}}:</span>
        <span class="fs-1-3 font-w-bold text-ac" *ngIf="userProfile.framework">{{convertToString(userProfile.framework.boards)}}</span>
      </div>
      <div class="mb-15 d-flex flex-ai-center flex-dc">
        <span class="fs-1-16">{{resourceService.frmelmnts.lbl.medium}} :</span>
        <span class="fs-1-3 font-w-bold text-ac" *ngIf="userProfile.framework">{{convertToString(userProfile.framework.medium)}}</span>
      </div>
      <div class="mb-15 d-flex flex-ai-center flex-dc">
        <span class="fs-1-16">{{resourceService.frmelmnts.lbl.subjects}} :</span>
        <span class="fs-1-3 font-w-bold text-ac" *ngIf="userProfile.framework">{{convertToString(userProfile.framework.subjects)}}</span>
      </div>
      <div class="d-flex flex-ai-center flex-dc">
        <span class="fs-1-16">{{resourceService.frmelmnts.lbl.classes}} :</span>
        <span class="fs-1-3 font-w-bold text-ac" *ngIf="userProfile.framework">{{convertToString(userProfile.framework.grades)}}</span>
      </div>
      <div class="d-flex flex-ai-center flex-jc-center" (click)="showEdit = true">
        <button class="ui semi-circular dodger-blue button mt-30">{{resourceService.frmelmnts.lbl.edit}}</button>
      </div>
    </div>
    <!-- User info mobile view ends-->
  </section>



  <!-- my badges section starts -->
  <extension-point *ngIf="userProfile.badgeAssertions && userProfile.badgeAssertions.length > 0" [name]="'profile-widget'"></extension-point>
  <!-- my badges section ends -->



  <div class="p-50 profile-bg-c-2">
    <!--contributions view starts-->
    <div class="fs-1-7 font-w-bold pl-20 mobile only" *ngIf="contributions && contributions.length > 0">{{resourceService.frmelmnts.scttl.contributions}}
      ({{contributions.length}})</div>
    <div class="ui divider my-5 mobile only"></div>
    <!--contributions computer view starts-->
    <div class="ui segments" *ngIf="contributions && contributions.length > 0">
      <div class="ui segment">
        <div class="fs-1-7 pl-10">{{resourceService.frmelmnts.scttl.contributions}} ({{contributions.length}})</div>
      </div>

      <div class="ui segment">
        <div class="regular slider pt-10">
          <ngx-slick in-view-container [throttle]="[1000]" [trigger]="item" (afterChange)="onTelemetryEvent(contributions,$event)"
            (beforeChange)="beforeContributionSlideChange($event)" class="carousel" #slickModal="slick-modal" [config]="slideConfig">
            <div in-view-item [id]="i" [data]="content" ngxSlickItem *ngFor="let item of contributions;let i = index;"
              class="slide">
              <div>
                <app-card (clickEvent)="onClickOfMyContributions($event)" [data]="item" [customClass]="'mr-20'"></app-card>
              </div>
            </div>
          </ngx-slick>
        </div>
      </div>
    </div>
    <!--contributions computer view ends-->
    <!--contributions view ends-->

    <!-- tarainings attended computer view strats-->
    <table class="ui basic table profile-bg-c-1 mt-20" *ngIf="attendedTraining && attendedTraining.length > 0">
      <thead>
        <tr>
          <th colspan="2" class="fs-1-7 pl-30">Trainings attended ({{attendedTraining.length}})</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <ul class="pl-30 pr-30">
            <li class="d-flex flex-jc-space-between mb-20" *ngFor="let data of attendedTraining | slice:0:courseLimit">
              <span class="fs-1-16 color-3">{{data.courseName}}</span>
              <span class="fs-1 color-4" *ngIf="data.completedOn">{{data.completedOn}}</span>
            </li>
            <div *ngIf="attendedTraining.length > 3">
              <button class="ui semi-circular dodger-blue button mt-30" *ngIf="showMoreTrainings" (click)="toggleCourse(true)">{{resourceService.frmelmnts.btn.viewmore}}
                <i class="chevron down icon"></i>
              </button>
              <button class="ui semi-circular dodger-blue button mt-30" (click)="toggleCourse(false)" *ngIf="!showMoreTrainings">{{resourceService.frmelmnts.btn.viewless}}
              <i class="chevron up icon"></i>
              </button>
            </div>
          </ul>
        </tr>
      </tbody>
    </table>
    <!-- tarainings attended computer view ends-->
  </div>

  <!-- tarainings attended mobile view strats-->
  <div class="fs-1-7 font-w-bold mt-30 pl-20 mobile only" *ngIf="attendedTraining && attendedTraining.length > 0">Trainings
    attended ({{attendedTraining.length}})</div>
  <div class="ui divider my-5 mobile only"></div>
  <div class="profile-bg-c-1 mobile only" *ngIf="attendedTraining && attendedTraining.length > 0">
    <ul class="px-20">
      <li class="d-flex flex-dc mb-20" *ngFor="let data of attendedTraining | slice:0:courseLimit">
        <span class="fs-1-16 color-3">{{data.courseName}}</span>
        <span class="fs-1 color-4"*ngIf="data.completedOn">{{data.completedOn}}</span>
      </li>
    </ul>
  </div>
  <!-- tarainings attended mobile view ends-->
</div>
<div class="twelve wide column">
  <div class="ui raised segment " *ngIf="!userProfile">
    <app-loader [data]='loaderMessage'></app-loader>
  </div>
</div>


<app-popup *ngIf="showEdit" #profileModal [formInput]="inputData" [showCloseIcon]="true" [buttonLabel]="resourceService.frmelmnts.btn.submit"
  (submit)="updateProfile($event)"></app-popup>
<router-outlet></router-outlet>