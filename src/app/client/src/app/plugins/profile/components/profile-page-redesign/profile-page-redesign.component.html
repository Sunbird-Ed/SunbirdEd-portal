<div *ngIf="userProfile">
  <section class="pb-30 d-flex flex-ai-center flex-dc">
    <div class="ui container">
      <div class="mb-15 d-flex flex-jc-center relative">
        <ngx-avatar 
          class="profile-avatar"
          [style]="avtarStyle"
          [size]="92" 
          initialsSize="1" 
          name="{{userProfile.firstName}}"
          round="true">
        </ngx-avatar>
        <div 
          class="ui primary dropdown button adminActionsButton computer only" 
          *ngIf='permissionService.permissionAvailable'
          appPermission [permission]='adminActions'>
          <sui-select 
            [placeholder]="'Admin Actions'" 
            [(ngModel)]="adminActionSelectedOption" 
            (ngModelChange)="onChange()">
              <sui-select-option 
                *ngFor="let type of adminActionDropDownOptions" 
                [value]="type">
              </sui-select-option>
          </sui-select>
        </div>
      </div>
    </div>
    <div class="profileName mb-15 text-ac">
      {{userProfile.firstName}} {{userProfile.lastName}}
    </div>
    <div 
      class="mb-15 text-ac profileLabels" 
      *ngIf="roles && roles.length > 0">
      <span 
        class="ui dodger-blue basic label mr-15 mt-5" 
        *ngFor="let role of roles | slice:0:showMoreRolesLimit">
          {{role}}
      </span>
    </div>
    <div 
      *ngIf="roles.length > defaultShowMoreRolesLimit" 
      class="color-2 mb-10 font-w-bold cursor-pointer fs-0-92">
      <div *ngIf="showMoreRoles" (click)="toggle(true)" tabindex="0">
        + {{roles.length - defaultShowMoreRolesLimit}} 
        {{resourceService.frmelmnts.lbl.more}}
        <i class="chevron down icon fs-0-785"></i>
      </div>
      <div (click)="toggle(false)" *ngIf="!showMoreRoles" tabindex="0">
        {{resourceService.frmelmnts.lbl.showLess}}
        <i class="chevron up icon fs-0-785"></i>
      </div>
    </div>
    <div 
      class="profileOrg font-w-bold mb-10 text-ac" 
      *ngIf=" orgDetails && orgDetails.orgName">
      {{orgDetails.orgName}}
    </div>
    <div 
      class="profileGeo m-0 pl-0" 
      *ngIf=" orgDetails && orgDetails.locations">
        <div 
          class="mb-0 d-flex flex-jc-center m-responsive-flex-dc" 
          *ngIf="getLocationDetails(orgDetails.locations, 'block')">
          <span class="min-w-90 text-ac">
            Block :
          </span>
          <span class="text-ac">
            {{getLocationDetails(orgDetails.locations, 'block')}}
          </span>
        </div>
        <div class="mb-0 d-flex flex-jc-center">
          <span class="min-w-90 text-ac">
            District :
          </span>
          <span class="text-ac">
            {{getLocationDetails(orgDetails.locations, 'district')}},
            {{getLocationDetails(orgDetails.locations, 'state')}}
          </span>
        </div>
    </div>
  </section>

  <section 
    class="pt-20 pb-20 d-flex flex-jc-center profile-bg-c-3" 
    *ngIf="userProfile.email || userProfile.phone">
    <div class="d-flex flex-dc">
      <div class="d-flex flex-jc-center">
        <div 
          class="ui semi-circular dodger-blue basic label mb-15 fs-1-143" 
          *ngIf="userProfile.phone">
            <i class="phone blue icon mr-5"></i> 
            +91 {{userProfile.phone}}
        </div>
      </div>
      <div 
        class="ui semi-circular dodger-blue basic label fs-1-143" 
        *ngIf="userProfile.email">
          <i class="mail icon mr-5"></i> 
          {{userProfile.email}}
      </div>
    </div>
  </section>

  <section class="d-flex flex-ai-center flex-dc pt-30 pb-30 profile-bg-c-4">
    <div class="ui container">
      <div class="mb-15 relative profileTeachingCover">
        <div class="profileTeaching">
          <div class="mb-15 row">
            <span class="left">
              {{resourceService.frmelmnts.lbl.boards}} :
            </span>
            <span class="right" *ngIf="userProfile.framework">
              {{convertToString(userProfile.framework.boards)}}
            </span>
          </div>
          <div class="mb-15 row">
            <span class="left">
              {{resourceService.frmelmnts.lbl.medium}} :
            </span>
            <span class="right" *ngIf="userProfile.framework">
              {{convertToString(userProfile.framework.medium)}}
            </span>
          </div>
          <div class="mb-15 row">
            <span class="left">
              {{resourceService.frmelmnts.lbl.subjects}} :
            </span>
            <span class="right" *ngIf="userProfile.framework">
              {{convertToString(userProfile.framework.subjects)}}
            </span>
          </div>
          <div class="row">
            <span class="left">
              {{resourceService.frmelmnts.lbl.classes}} :
            </span>
            <span class="right" *ngIf="userProfile.framework">
              {{convertToString(userProfile.framework.grades)}}
            </span>
          </div>
        </div>
        <button 
          class="ui button semi-circular dodger-blue profileEditButton mt-20"
          (click)="showEdit = true">
            {{resourceService.frmelmnts.lbl.edit}}
        </button>
      </div>

    </div>
  </section>

  <!-- my badges section starts -->
  <extension-point 
    *ngIf="userProfile.badgeAssertions && userProfile.badgeAssertions.length > 0" 
    [name]="'profile-widget'">
  </extension-point>
  <!-- my badges section ends -->

  <div class="profileContributions profile-bg-c-2">
    <div class="ui segments" *ngIf="contributions && contributions.length > 0">
      <div class="ui segment">
        <div class="header">
          {{resourceService.frmelmnts.scttl.contributions}} ({{contributions.length}})
        </div>
      </div>
      <div class="ui segment">
        <div class="regular slider pt-10">
          <ngx-slick 
            in-view-container 
            [throttle]="[1000]" 
            [trigger]="item" 
            (afterChange)="onTelemetryEvent(contributions,$event)"
            (beforeChange)="beforeContributionSlideChange($event)" 
            class="carousel" 
            #slickModal="slick-modal" 
            [config]="slideConfig">
            <div 
              in-view-item 
              [id]="i" 
              [data]="content" 
              ngxSlickItem 
              *ngFor="let item of contributions;let i = index;"
              class="slide">
              <div>
                <app-card 
                  (clickEvent)="onClickOfMyContributions($event)" 
                  [data]="item" 
                  [customClass]="'mr-20'">
                </app-card>
              </div>
            </div>
          </ngx-slick>
        </div>
      </div>
    </div>

    <table 
      class="profileTrainings ui basic table profile-bg-c-1 mt-20" 
      *ngIf="attendedTraining && attendedTraining.length > 0">
      <thead>
        <tr>
          <th>
            Trainings attended ({{attendedTraining.length}})
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <ul class="profileTrainingsList pl-20">
              <li 
                class="profileTrainingsListItems mb-15" 
                *ngFor="let data of attendedTraining | slice:0:courseLimit">
                <span class="left color-3">
                  {{data.courseName}}
                </span>
                <span class="color-4" *ngIf="data.completedOn">
                  {{data.completedOn}}
                </span>
              </li>
              <div *ngIf="attendedTraining.length > 3" class="text-center mt-30">
                <button 
                  class="ui semi-circular dodger-blue button" 
                  *ngIf="showMoreTrainings" 
                  (click)="toggleCourse(true)">
                    {{resourceService.frmelmnts.btn.viewmore}}
                    <i class="chevron down icon"></i>
                </button>
                <button 
                  class="ui semi-circular dodger-blue button" 
                  (click)="toggleCourse(false)" 
                  *ngIf="!showMoreTrainings">
                  {{resourceService.frmelmnts.btn.viewless}}
                  <i class="chevron up icon"></i>
                </button>
              </div>
            </ul>
        </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
<div class="twelve wide column">
  <div class="ui raised segment " *ngIf="!userProfile">
    <app-loader [data]='loaderMessage'></app-loader>
  </div>
</div>

<app-popup 
  *ngIf="showEdit" 
  #profileModal 
  [formInput]="inputData" 
  [showCloseIcon]="true" 
  [buttonLabel]="resourceService.frmelmnts.btn.submit"
  (submit)="updateProfile($event)">
</app-popup>
<router-outlet></router-outlet>