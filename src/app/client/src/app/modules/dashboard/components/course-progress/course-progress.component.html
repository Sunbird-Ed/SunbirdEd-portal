<sui-modal [isClosable]="true" (dismissed)="modal.deny(); showDownloadModal = false;" #modal *ngIf="showDownloadModal">
  <!-- Download report popup-->
  <div class="header">
    <div class="ui grid">
      <div class="eleven wide column">
        <span class="ui header">{{resourceService?.frmelmnts?.instn?.t0060}}</span>
      </div>
    </div>
  </div>
  <div class="content">
    <p class="meta">{{resourceService?.messages?.stmsg?.m0095}}</p>
  </div>
  <div class="actions mt-20 ">
    <div></div>
  </div>
</sui-modal>


<!-- Updated code as per new design for semantic datatable-->
<div class="ui container">
  <div class=" ui grid">
    <div class="twelve wide column">
      <div>
        <div class="ui divider"></div>
        <div id="dashoardFiltersHolder" *ngIf="batchlist && batchlist.length > 0">
          <div class="d-flex flex-jc-space-between flex-ai-center" [appTelemetryImpression]="telemetryImpression">
            <div class="d-flex w-300">
              <sui-select class="selection fluid bordered" placeholder="Select batch to see dashboard" [(ngModel)]="selectedOption"
                [options]="batchlist" labelField="name" valueField="id" [isSearchable]="true" #select>
                <sui-select-option *ngFor="let course of select.filteredOptions" [value]="course" (click)="setBatchId(course.id);"
                  appTelemetryInteract [telemetryInteractObject]="interactObject" [telemetryInteractEdata]="{id:course.id,type:'click',pageid:'course-progress-dashboard'}">
                </sui-select-option>
              </sui-select>

            </div>
            <div class="d-flex">
              <a class="ui item basic icon circular float-ContentRight" data-tooltip="Close the dashboard"
                appTelemetryInteract [telemetryInteractObject]="interactObject" [telemetryInteractEdata]="{id:'closeDashboard',type:'click',pageid:'course-progress-dashboard'}">
                <i (click)='redirect()' class="ui remove icon CloseButtonFont"></i>
              </a>
            </div>
          </div>
          <div class="d-flex my-20" *ngIf="dashboarData">
            <span class="course-start-dt black-divider pr-10">
              <b *ngIf="dashboarData.startDate">
                {{resourceService?.frmelmnts?.lbl?.startdate}}:
              </b>
              {{dashboarData.startDate}}
            </span>
            <span *ngIf="dashboarData.endDate" class="course-end-dt black-divider px-10">
              <b>{{resourceService?.frmelmnts?.lbl?.enddate}}:
              </b>
              {{dashboarData.endDate}}
            </span>
            <span *ngIf="dashboarData.count" class="course-participants black-divider px-10">
              <b>{{resourceService?.frmelmnts?.lbl?.participants}}:
              </b> {{dashboarData.count}}
            </span>
            <span *ngIf="dashboarData.completedCount" class="course-completed pl-10">
              <b>{{resourceService?.frmelmnts?.lbl?.completedCourse}}:
              </b>
              {{dashboarData.completedCount}}
            </span>
          </div>
        </div>
        <div class="d-flex flex-jc-space-between flex-ai-center download-file-container mt-15 mb-0 mx-0" *ngIf="dashboarData">
          <div class="d-flex">
            <div class="four wide column pl-15">
              <div class="ui category search float-ContentRight">
                <div class="ui icon input">
                  <input (keyup)="keyup(searchText)" class="search-course-data" type="text" title="Search" class="" [(ngModel)]="searchText"
                    placeholder="Search" autocomplete="off" />
                  <i class="search icon"></i>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex">
            <a href="javascript:void(0);" class="ui download-file right floated text-decoration-underline pl-10"
              (click)="downloadReport();" appTelemetryInteract [telemetryInteractObject]="interactObject"
              [telemetryInteractEdata]="{id:'download',type:'click',pageid:'course-progress-dashboard'}">
              {{resourceService?.frmelmnts?.instn?.t0065}}</a>
          </div>
        </div>
        <div class="sb-data-table-container" *ngIf="batchlist && batchlist.length > 0 && queryParams.batchIdentifier && !showLoader && !showWarningDiv">
          <table id="CourseStatsTable" class="ui celled table selectable sb-data-table" cellspacing="0">
            <thead class="sb-data-table-header">
              <tr>
                <th>
                  <div class="cursor-pointer" (click)="setOrder('username')"
                    appTelemetryInteract [telemetryInteractObject]="interactObject" [telemetryInteractEdata]="{id:'sortByUsername',type:'click',pageid:'course-progress-dashboard'}">
                    {{resourceService?.frmelmnts?.lbl?.dashboardsortbyusername}}
                    <span class="primary-color" [hidden]="reverse" style="float:right">
                      <i class="sort down icon" *ngIf="order === 'username'"></i>
                    </span>
                    <span class="primary-color" [hidden]="!reverse" style="float:right">
                      <i class="sort up icon" *ngIf="order === 'username'"></i>
                    </span>
                  </div>
                </th>
                <th>
                  <div  class="cursor-pointer" (click)="setOrder('orgName')"
                    appTelemetryInteract [telemetryInteractObject]="interactObject" [telemetryInteractEdata]="{id:'sortByOrganization',type:'click',pageid:'course-progress-dashboard'}">
                    {{resourceService?.frmelmnts?.lbl?.orgname}}
                    <span class="primary-color" [hidden]="reverse" style="float:right">
                      <i class="sort down icon" *ngIf="order === 'orgName'"></i>
                    </span>
                    <span class="primary-color" [hidden]="!reverse" style="float:right">
                      <i class="sort up icon" *ngIf="order === 'orgName'"></i>
                    </span>
                  </div>
                </th>
                <th>
                  <div  class="cursor-pointer">
                    {{resourceService?.frmelmnts?.lbl?.mobileNumber}}
                  </div>
                </th>
                <th>
                  <div  class="cursor-pointer" (click)="setOrder('enrolledOn')"
                    appTelemetryInteract [telemetryInteractObject]="interactObject" [telemetryInteractEdata]="{id:'sortByEnrolledOn',type:'click',pageid:'course-progress-dashboard'}">
                    {{resourceService?.frmelmnts?.lbl?.dashboardsortbyenrolledon}}
                    <span class="primary-color" [hidden]="reverse" style="float:right">
                      <i class="sort down icon" *ngIf="order === 'enrolledOn'"></i>
                    </span>
                    <span class="primary-color" [hidden]="!reverse" style="float:right">
                      <i class="sort up icon" *ngIf="order === 'enrolledOn'"></i>
                    </span>
                  </div>
                </th>
                <th class="table-headerDashboard">
                  <div class="cursor-pointer"  (click)="setOrder('progress')"
                    appTelemetryInteract [telemetryInteractObject]="interactObject" [telemetryInteractEdata]="{id:'sortByStatus',type:'click',pageid:'course-progress-dashboard'}">
                    {{resourceService?.frmelmnts?.lbl?.dashboardsortbystatus}}
                    <span class="primary-color" [hidden]="reverse" style="float:right">
                      <i class="sort down icon" *ngIf="order === 'progress'"></i>
                    </span>
                    <span  class="primary-color" [hidden]="!reverse" style="float:right">
                      <i class="sort up icon" *ngIf="order === 'progress'"></i>
                    </span>
                  </div>
                </th>
              </tr>
            </thead>
            <tbody class="sb-data-table-body">
              <tr *ngFor="let student of dashboarData.data">
                <td><span suiPopup popupText="{{student.username}}" *ngIf="student.username">{{student.username}}
                  </span>
                  <span *ngIf="!student.username">-</span>
                </td>
                <td>{{student.orgName}}</td>
                <td><span *ngIf="student.phone">{{student.phone}} </span>
                  <span *ngIf="!student.phone">-</span>
                </td>
                <td>{{student.enrolledOn | dateFormat}}</td>

                <td *ngIf="student.progress === 100">{{resourceService?.frmelmnts?.lbl?.done}}</td>
                <td class="ui green header text-font" *ngIf="(student.progress !== 100 && student.progress > 90)">{{student.progress}}%</td>
                <td class="ui orange header text-font" *ngIf="(student.progress !== 100 && student.progress > 30)">{{student.progress}}%</td>
                <td class="ui red header text-font" *ngIf="(student.progress !== 100 && student.progress < 30)">{{student.progress}}%</td>
              </tr>
              <tr *ngIf="dashboarData && dashboarData.data.length === 0">
                <td id="noRecordsFound">{{resourceService?.frmelmnts?.lbl?.noMatchingRecordFound}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="d-flex flex-ai-center flex-jc-space-between mt-10">
          <div   *ngIf="dashboarData && dashboarData.data.length >0 && !showLoader " >showing  {{pager.startIndex+1}} - {{pager.endIndex+1}} of {{dashboarData.data.count}}  users</div>
          <div class="pb-10" *ngIf="dashboarData && dashboarData.data.length >0 && totalCount > config.appConfig.DASHBOARD.PAGE_LIMIT && !showLoader ">
            <div class="ui pagination menu mt-10 right-floated pt-0" *ngIf="pager.pages.length ">
             <a [ngClass]="{disabled:pager.currentPage===1 }" class="item " (click)="navigateToPage(pager.currentPage - 1)">Previous</a>
              <a *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage===page}" (click)="navigateToPage(page)"
                class="item">{{page}}</a>
              <a [ngClass]="{disabled:pager.currentPage=== pager.totalPages}" (click)="navigateToPage(pager.currentPage + 1)"
                class="item">Next</a>
            </div>
          </div>
        </div>
        <div class="tweleve wide column" *ngIf="showLoader">
          <app-loader></app-loader>
        </div>
        <div class="ui warning message tweleve wide column" *ngIf="batchlist && batchlist.length > 1 && showWarningDiv && !showLoader">
          <div class="header">{{resourceService?.frmelmnts?.lbl?.dashboardnobatchselected}}</div>
          {{resourceService?.frmelmnts?.lbl?.dashboardnobatchselecteddesc}}
        </div>
      </div>
    </div>
  </div>
</div>



<!-- This is the updated code for semantic datatable -->
