<!-- Textbook details with continue playing and join course button -->
<div class="textbook-container">
  <div class="ui container">
    <div class="textbook py-16 sb-g">
      <div class="sb-g-col-xs-12 sb-g-col-md-9 sb-g-col-lg-9">
        <!-- Textbook details -->
        <div class="textbook__details d-flex flex-ai-center">
          <!-- Textbook image -->
          <div class="textbook__bookimg">
            <img src="{{courseHierarchy?.appIcon}}" alt="textbook">
          </div>
          <div class="ml-8 textbook__heading">
            <!-- Textbook title -->
            <h5 class="textbook__title sb-color-primary font-weight-bold mb-0">{{courseHierarchy?.name}}
            </h5>
            <!-- Textbook Rating with share icon -->
            <div class="textbook__rating mt-4">

              <sui-rating *ngIf="courseStatus !== 'Unlisted'" class="star mini" [isReadonly]="true"
                [ngModel]="courseHierarchy.me_averageRating || 0" [maximum]="5"></sui-rating>

              <button (click)="onShareLink();sharelinkModal=true;"
                class="sb-btn sb-btn-normal sb-btn-link sb-btn-link-primary sb-left-icon-btn ml-8">
                <i class="blue share alternate icon"></i>
                {{resourceService?.frmelmnts?.lbl?.share}}
              </button>

              <button class="sb-btn sb-btn-normal sb-btn-link sb-btn-link-primary sb-left-icon-btn ml-8"
                *ngIf="permissionService.permissionAvailable && courseStatus !== 'Unlisted'" appPermission
                appTelemetryInteract [telemetryInteractObject]="courseInteractObject"
                [telemetryInteractEdata]="{id:'copyContent' , type: 'click' , pageid:'course-consumption'}"
                [permission]="['CONTENT_CREATOR', 'CONTENT_REVIEWER']" (click)="copyContent(courseHierarchy)"
                title="{{resourceService?.frmelmnts?.lbl?.copy}}">
                <i class="blue clone outline icon"></i>
                {{resourceService?.frmelmnts?.lbl?.copy}}
              </button>              
            </div>
          </div>
        </div>

        <!-- Info displaying if course is flagged -->
        <h6 class="ui small negative message" *ngIf="courseHierarchy.status === 'Flagged'">
          {{resourceService?.messages?.imsg?.m0001}}</h6>

        <!-- Info displaying if batch has expired -->
        <h6 class="ui small info message" *ngIf="enrolledCourse && getBatchStatus() && batchEndDate">
          {{resourceService?.frmelmnts?.lbl?.expiredBatchWarning | interpolate:'{EndDate}':batchEndDate}}</h6>

      </div>

      <div class="sb-g-col-xs-12 sb-g-col-md-3 sb-g-col-lg-3 certified-course" style="align-self: center;">
        <!-- join course, start learning, continue learning, view dashboard buttons -->
        <div class="certified-course__btn" *ngIf="!enrolledCourse && !courseMentor">
          <button class="sb-btn sb-btn-secondary sb-btn-normal ml-auto textbook__addbtn"
            (click)="showJoinModal(true);">Join course</button>
        </div>

        <div class="certified-course__btn" *ngIf="enrolledCourse && progress===0">
          <button appTelemetryInteract [telemetryInteractEdata]="startIntractEdata"
            [telemetryInteractObject]="courseInteractObject"
            class="sb-btn sb-btn-secondary sb-btn-normal ml-auto textbook__addbtn" [disabled]="showResumeCourse"
            (click)="resumeCourse(true)">Start learning</button>
        </div>

        <div class="certified-course__btn" *ngIf="enrolledCourse && progress>0">
          <button appTelemetryInteract [telemetryInteractEdata]="resumeIntractEdata"
            [telemetryInteractObject]="courseInteractObject"
            class="sb-btn sb-btn-secondary sb-btn-normal textbook__addbtn ml-8 sb-left-icon-btn"
            [disabled]="showResumeCourse" (click)="resumeCourse(true)"><i
              class="icon-svg icon-svg--xxs icon-share mr-8"><svg class="icon icon-svg--white">
                <use xlink:href="./assets/images/libdemo/sprite.svg#play"></use>
              </svg></i>Continue learning</button>
        </div>

        <div class="ml-auto text-right mt-8" *ngIf="permissionService?.permissionAvailable && !enrolledCourse"
          appPermission [permission]="dashboardPermission">
          <button appTelemetryInteract [telemetryInteractObject]="courseInteractObject"
            [telemetryInteractEdata]="{id:'viewCourseDashboard' , type: 'click' , pageid:'course-consumption'}"
            class="sb-btn sb-btn-secondary sb-btn-normal" (click)="showDashboard()">
            {{resourceService?.frmelmnts?.btn?.viewCourseStatsDashboard}}
          </button>
        </div>

      </div>
    </div>
  </div>
</div>

<div class="ui active inverted dimmer" *ngIf="showCopyLoader">
  <div class="ui text centered inline loader mt-40">{{resourceService.frmelmnts.lbl.copycontent}}</div>
</div>
<app-share-link [shareLink]="shareLink" [telemetryShareData]="telemetryShareData" *ngIf="sharelinkModal"
  (close)="closeSharePopup('close-share-link-popup')">
</app-share-link>