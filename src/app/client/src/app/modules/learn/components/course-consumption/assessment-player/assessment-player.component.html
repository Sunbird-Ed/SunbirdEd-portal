<div *ngIf="!showLoader" [appTelemetryImpression]="telemetryPlayerPageImpression">
  <!--CC-Player Back button -->
  <div class="sb-bg-white relative position cc-player__btn-back ">
    <div class="ui container py-8 px-0">
      <button type="button" class="sb-btn sb-btn-normal sb-btn-link sb-btn-link-primary sb-left-icon-btn px-0"
        (click)="goBack(); logTelemetry('back-track', courseHierarchy)">
        <i class="icon-svg icon-svg--xxs icon-back mr-4">
          <svg class="icon icon-svg--primary">
            <use xlink:href="assets/images/sprite.svg#arrow-long-left"></use>
          </svg>
        </i>
        {{resourceService?.frmelmnts?.btn?.back}}
      </button>
    </div>
  </div>

  <!-- Header -->
  <div class="content-header header-shadow"  [ngClass]="{'header-block': isFullScreenView}">
    <div class="ui container py-16">
      <div class="sb-g">
        <div class="sb-g-col-xs-12 sb-g-col-md-8 sb-g-col-lg-8">
          <div class="d-flex flex-ai-center flex-jc-space-between flex-w-wrap">
            <div class="content-header__img mr-8">
              <img [src]="courseHierarchy?.appIcon || courseHierarchy?.courseLogoUrl" alt=""
                style="width: 55px; height: 55px;" (error)="img.src = courseFallbackImg" #img>
            </div>
            <div class="flex-basis-1 mr-32">
              <div class="content-header__title sb__ellipsis sb__ellipsis--one">
                <div>{{courseName | titlecase}}</div>
              </div>
              <div class="d-flex flex-ai-center content-header__info fsmall mt-4" *ngIf="!isParentCourse">
                <h5 class="sb-color-primary font-weight-bold">{{courseHierarchy?.name | titlecase}}</h5>
                <a (click)="onShareLink();shareLinkModal=true;"
                  class="sb-btn sb-btn-normal sb-btn-link sb-btn-link-primary sb-left-icon-btn mr-16">
                  <i class="blue share alternate icon"></i>
                  {{resourceService?.frmelmnts?.lbl?.share}}
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- CC-Player Video -->
  <div class="ui container">
    <div class="cc-player sb-g">
      <section class="sb-g-col-xs-12 sb-g-col-md-8 sb-g-col-lg-8 cc-player__video sb-toc-player-column">
        <div class="toc-content text-left">
          <div class="content-video">
            <section class="content-video__player" id="player-area-height">
              <div class="aspectratio" data-ratio="16:9" id="help-video-aspect-ratio" #aspectRatio>
                <app-player class="content-player" [playerOption]="playerOption" [playerConfig]="playerConfig"
                  [contentProgressEvents$]="contentProgressEvents$" (assessmentEvents)="onAssessmentEvents($event)"
                  (questionScoreSubmitEvents)="onQuestionScoreSubmitEvents($event)" (ratingPopupClose)="onRatingPopupClose()"></app-player>
              </div>
              <app-content-actions *ngIf="activeContent" [contentData]="activeContent" [objectRollUp]="objectRollUp">
              </app-content-actions>
            </section>
          </div>
          <div class="mt-8">
            <app-credits-and-licence *ngIf="activeContent" [contentData]="activeContent"></app-credits-and-licence>
          </div>
        </div>
      </section>
      <section class="sb-g-col-xs-12 sb-g-col-md-4 sb-g-col-lg-4 cc-player__list mb-16">
        <p class="py-8 mb-0 font-weight-bold">{{resourceService?.frmelmnts?.lbl?.contentLabel}}</p>
        <div class="side-toc-content chapter-box">
          <div *ngFor="let item of courseHierarchy?.children; let index = index;">
            <p *ngIf="item?.mimeType === 'application/vnd.ekstep.content-collection'" class="title">{{item?.name}}</p>
            <div *ngIf="item;else noContent">
              <div *ngIf="item?.mimeType !== 'application/vnd.ekstep.content-collection' && !item?.children?.length">
                <div class="child-content-padding">
                  <sb-toc-card [content]="item" (tocCardClick)="onTocCardClick($event, 'toc-card')" [type]="cardType"
                    [contentStatus]="contentStatus">
                  </sb-toc-card>
                </div>
              </div>
              <div *ngIf="item?.children?.length">
                <div *ngFor="let child of item?.children">
                  <div>
                    <sb-toc-child-item [childData]="child" (tocCardClick)="onTocCardClick($event, 'child-item')"
                      [contentStatus]="contentStatus" [type]="cardType">
                    </sb-toc-child-item>
                  </div>
                </div>
              </div>
            </div>
            <ng-template #noContent>
              <div class="heading">{{noContentMessage}}</div>
            </ng-template>
          </div>
          <sb-toc-card [content]="courseHierarchy"
            *ngIf="courseHierarchy?.mimeType !== 'application/vnd.ekstep.content-collection'"
            (tocCardClick)="onTocCardClick($event)" [type]="cardType">
          </sb-toc-card>
        </div>
      </section>
    </div>
  </div>
</div>
<div class="ui container py-16" *ngIf="showLoader">
  <app-loader [data]='loaderMessage'></app-loader>
</div>
<app-share-link [shareLink]="shareLink" [telemetryShareData]="telemetryShareData" *ngIf="shareLinkModal"
  (close)="shareLinkModal = false">
</app-share-link>
<app-course-completion *ngIf="showCourseCompleteMessage"></app-course-completion>