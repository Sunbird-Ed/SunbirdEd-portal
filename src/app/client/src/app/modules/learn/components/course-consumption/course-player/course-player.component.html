
<!-- Accordion and batch card section start -->
<div class="sb-bg-color-primary-100" *ngIf="!loader" [appTelemetryStart]="telemetryCourseStart" [appTelemetryEnd]="telemetryCourseEndEvent">
  <div class="ui container" [appTelemetryImpression]="telemetryCourseImpression">
    <div class="sb-course-details sb-g py-16">
      <div class="sb-course-details__training sb-g-col-xs-12 sb-g-col-md-9 sb-g-col-lg-9">


        
        <!-- Course training information starts -->
        <div class="training-info">
          <h4 class="font-weight-bold">Course Details</h4>
          <div class="training-relevant my-16">
            <h6 class="mt-0 mb-8 fsmall training-relevant__heading">The course is relevant for:</h6>
            <div class="training-relevant__class mb-4 sb-color-gray-400"><span>Class:&nbsp;</span><span>{{ courseHierarchy?.gradeLevel?.join(', ')}}</span>
            </div>
            <div class="training-relevant__subject mb-4 sb-color-gray-400"><span>Subject:&nbsp;</span><span>{{ courseHierarchy?.subject?.join(', ')}}</span></div>
            <div class="training-relevant__medium mb-4 sb-color-gray-400"><span>Medium:&nbsp;</span><span>{{ courseHierarchy?.medium?.join(', ')}}</span>
            </div>
            <label class="fsmall mt-16 mb-8">Description</label>
            <p class="traning-relevant__description sb-color-gray-400">{{ courseHierarchy?.description}}</p>
          </div>
        </div>
        <!-- Course training information ends -->



        <div class="training-modules mt-16">
          <!-- Here the player and accordions will come -->
          




          <div *ngFor="let item of courseHierarchy?.children; let index = index">
            <div class="d-flex flex-ai-center flex-jc-space-between py-8">
              <h5 class="course-list_title py-8 ellipsis mr-16">{{item?.name}}</h5>
              <button (click)="navigateToPlayerPage(item); logTelemetry('continue-course', item)"
                *ngIf="enrolledCourse && !item?.isUnitConsumed && item?.isUnitConsumptionStart"
                class="sb-btn sb-btn-outline-secondary sb-btn-normal flex-none ml-8">{{resourceService?.frmelmnts?.lbl?.continue}}</button>
              <button (click)="navigateToPlayerPage(item); logTelemetry('start-course', item)"
                *ngIf="(!enrolledCourse && !hasPreviewPermission) || !item?.isUnitConsumptionStart && item?.children?.length"
                class="sb-btn sb-btn-outline-secondary sb-btn-normal flex-none ml-8">{{resourceService?.frmelmnts?.btn?.start}}</button>
            </div>
            <div class="chapter-box sb-g">
              <section class="sb-g-col-xs-12"
                [ngClass]="{'sb-g-col-md-12 sb-g-col-lg-12': !enrolledCourse, 'sb-g-col-md-8 sb-g-col-lg-8': enrolledCourse}">
                <sb-toc-curriculum
                  *ngIf="item?.mimeType === 'application/vnd.ekstep.content-collection' && item?.children?.length; else noContent"
                  [isAccordion]="true" (tocCardClick)="navigateToContent($event, item, 'curriculum-toc-card')"
                  [tocData]="item" [activeContent]="activeContent" [type]="cardType" [contentStatus]="contentStatus">
                </sb-toc-curriculum>
                <sb-toc-card [content]="item" *ngIf="item?.mimeType !== 'application/vnd.ekstep.content-collection'"
                  (tocCardClick)="navigateToContent($event, item, 'toc-card')" [type]="cardType"
                  [contentStatus]="contentStatus">
                </sb-toc-card>
                <ng-template #noContent>
                  <div class="heading" *ngIf="item?.mimeType === 'application/vnd.ekstep.content-collection'">
                    {{resourceService?.messages?.stmsg?.m0121}}</div>
                </ng-template>
              </section>
              <section class="sb-g-col-xs-12 sb-g-col-md-4 sb-g-col-lg-4" *ngIf="enrolledCourse">
                <div class="sb-bg-color-white course-list-progress text-left">
                  <div class="course-list-progress__title">{{resourceService?.messages?.stmsg?.m0108 | uppercase}}
                  </div>
                  <div class="course-list-progress__status mt-8">
                    {{item?.consumedContent || '0'}}/{{item?.contentCount || '0'}}
                    {{resourceService?.frmelmnts?.lbl?.completed}}
                  </div>
                  <sui-progress [value]="item?.progress" maximum="100"
                    class="green course-list-progress__barholder mt-8">
                  </sui-progress>
                </div>
              </section>
            </div>
          </div>

          <div *ngIf="enrolledCourse || hasPreviewPermission" class="course-player--metadata text-left">
            <app-course-info [courseHierarchy]="courseHierarchy"></app-course-info>
          </div>



        </div>
      </div>
      <div class="sb-course-details__info sb-g-col-xs-12 sb-g-col-md-3 sb-g-col-lg-3">
        <!-- Batch card information starts -->
        <!-- 1. Certified Course -->
        <div class="sb-bg-color-white p-8 mb-16">
          <div class="certified-course d-inline-flex flex-ai-center py-8 px-16 width-100">
            <img src="assets/images/certificate-icon.png" alt="Certificate">
            <span class="fnormal sb-color-primary ml-16 font-weight-bold">This course contains a certificate</span>
          </div>
        </div>
        <!-- 2. Course Progress bar -->
        <div class="sb-bg-color-white certified-course__progress p-16 mb-16">
          <div class="fsmall">Course Progress</div>
          <div class="sb-color-primary fnormal font-weight-bold mt-8">5% Completed</div>
          <sui-progress [value]="5" [maximum]="100" class="mb-0 mr-0 mt-8 tiny"></sui-progress>
          <div class="fsmall mt-8">Complete all the modules to get a certificate</div>
        </div>

        <!-- 3. Join batch, leave batch and show batch popup-->      
        <app-batch-details *ngIf="courseStatus !== 'Unlisted'" [courseId]="courseId" [batchId]="batchId"
          [enrolledCourse]="enrolledCourse" [enrolledBatchInfo]="enrolledBatchInfo" [courseHierarchy]="courseHierarchy"
          [courseProgressData]="courseProgressData" (allBatchDetails)="getAllBatchDetails($event)"></app-batch-details>

        <!-- Credits & License information -->
        <div *ngIf="enrolledCourse || hasPreviewPermission" class="course-player--metadata text-left">
        <app-course-info [courseHierarchy]="courseHierarchy"></app-course-info>
      </div>
      </div>
    </div>
  </div>
</div>




<!-- Join Course for explore-course-->
<sui-modal *ngIf="showJoinModal" [mustScroll]="true" [isClosable]="true" [transitionDuration]="0" [size]="'small'"
  class="sb-modal" appBodyScroll (dismissed)="showJoinModal = !showJoinModal" #modal>
  <div class="sb-modal-header">
    Access Course
  </div>
  <div class="sb-modal-content sb-join-modal-content">
    <div class="fsmall px-0 py-8">
      To access the course player you have to login and join it
    </div>
  </div>
  <div class="sb-modal-actions">
    <button class="sb-btn sb-btn-normal sb-btn-primary" (click)="showSmallModal = !showSmallModal">
      Join Course
    </button>
  </div>
</sui-modal>







<div class="ui container mt-24" [appTelemetryStart]="telemetryCourseStart" [appTelemetryEnd]="telemetryCourseEndEvent">
  <div *ngIf="!loader">
    <div class="course-player" [appTelemetryImpression]="telemetryCourseImpression">
      <!-- <div class="sb-pageSection course-player--header text-left">
        <div class="sb-pageSection-header">
          <h4 class="sb-pageSection-title sb-pageSection-title-light">
            {{resourceService?.frmelmnts?.lbl?.aboutthecourse}}</h4>
        </div>
        <div class="sb-pageSection-content">
          <div *ngIf="courseHierarchy?.description">
            <p *ngIf="!readMore">
              {{ courseHierarchy?.description | slice:0:200 }}&nbsp;
              <span class="ui cardsKnowMore mouse-pointer"
                *ngIf="courseHierarchy?.description?.length > 200 && readMore === false"
                (click)="readMore = !readMore;">{{resourceService?.frmelmnts?.lbl?.readmore}}</span>
            </p>
            <p *ngIf="readMore">
              {{ courseHierarchy?.description}}&nbsp;
              <span class="ui cardsKnowMore mouse-pointer"
                (click)="readMore = false;">{{resourceService?.frmelmnts?.lbl?.readless}}</span>
            </p>
          </div>
        </div>
      </div> -->

      <div class="course-player--card text-left">
        <!-- <app-batch-details *ngIf="courseStatus !== 'Unlisted'" [courseId]="courseId" [batchId]="batchId"
          [enrolledCourse]="enrolledCourse" [enrolledBatchInfo]="enrolledBatchInfo" [courseHierarchy]="courseHierarchy"
          [courseProgressData]="courseProgressData" (allBatchDetails)="getAllBatchDetails($event)"></app-batch-details> -->
      </div>

      <div class="course-player--content text-left">
        <h4 class="sb-pageSection-title sb-pageSection-title-light">
          {{resourceService?.frmelmnts?.lbl?.coursestructure}}</h4>

        <div class="sb-pageSection">
          <div *ngFor="let item of courseHierarchy?.children; let index = index">
            <div class="d-flex flex-ai-center flex-jc-space-between py-8">
              <h5 class="course-list_title py-8 ellipsis mr-16">{{item?.name}}</h5>
              <button (click)="navigateToPlayerPage(item); logTelemetry('continue-course', item)"
                *ngIf="enrolledCourse && !item?.isUnitConsumed && item?.isUnitConsumptionStart"
                class="sb-btn sb-btn-outline-secondary sb-btn-normal flex-none ml-8">{{resourceService?.frmelmnts?.lbl?.continue}}</button>
              <button (click)="navigateToPlayerPage(item); logTelemetry('start-course', item)"
                *ngIf="(!enrolledCourse && !hasPreviewPermission) || !item?.isUnitConsumptionStart && item?.children?.length"
                class="sb-btn sb-btn-outline-secondary sb-btn-normal flex-none ml-8">{{resourceService?.frmelmnts?.btn?.start}}</button>
            </div>
            <div class="chapter-box sb-g">
              <section class="sb-g-col-xs-12"
                [ngClass]="{'sb-g-col-md-12 sb-g-col-lg-12': !enrolledCourse, 'sb-g-col-md-8 sb-g-col-lg-8': enrolledCourse}">
                <sb-toc-curriculum
                  *ngIf="item?.mimeType === 'application/vnd.ekstep.content-collection' && item?.children?.length; else noContent"
                  [isAccordion]="true" (tocCardClick)="navigateToContent($event, item, 'curriculum-toc-card')"
                  [tocData]="item" [activeContent]="activeContent" [type]="cardType" [contentStatus]="contentStatus">
                </sb-toc-curriculum>
                <sb-toc-card [content]="item" *ngIf="item?.mimeType !== 'application/vnd.ekstep.content-collection'"
                  (tocCardClick)="navigateToContent($event, item, 'toc-card')" [type]="cardType"
                  [contentStatus]="contentStatus">
                </sb-toc-card>
                <ng-template #noContent>
                  <div class="heading" *ngIf="item?.mimeType === 'application/vnd.ekstep.content-collection'">
                    {{resourceService?.messages?.stmsg?.m0121}}</div>
                </ng-template>
              </section>
              <section class="sb-g-col-xs-12 sb-g-col-md-4 sb-g-col-lg-4" *ngIf="enrolledCourse">
                <div class="sb-bg-color-white course-list-progress text-left">
                  <div class="course-list-progress__title">{{resourceService?.messages?.stmsg?.m0108 | uppercase}}
                  </div>
                  <div class="course-list-progress__status mt-8">
                    {{item?.consumedContent || '0'}}/{{item?.contentCount || '0'}}
                    {{resourceService?.frmelmnts?.lbl?.completed}}
                  </div>
                  <sui-progress [value]="item?.progress" maximum="100"
                    class="green course-list-progress__barholder mt-8">
                  </sui-progress>
                </div>
              </section>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="enrolledCourse || hasPreviewPermission" class="course-player--metadata text-left">
        <app-course-info [courseHierarchy]="courseHierarchy"></app-course-info>
      </div>
    </div>
  </div>

</div>











<router-outlet></router-outlet>
<sui-modal [mustScroll]="true" [isClosable]="true" [transitionDuration]="0" [size]="'small'" class="sb-modal"
  appBodyScroll (dismissed)="showJoinTrainingModal = false; logTelemetry('join-training-popup-close')"
  *ngIf="showJoinTrainingModal" #joinTrainingModal>
  <!--Header-->
  <div class="sb-modal-header">
    {{resourceService?.frmelmnts?.btn?.enroll}}
  </div>
  <!--/Header-->
  <!--Content-->
  <div class="sb-modal-content">
    <div class="ui center aligned segment">
      <p>{{resourceService?.frmelmnts?.lbl?.joinTrainingToAcessContent}}</p>
    </div>
  </div>
  <!--/Content-->
</sui-modal>

<app-share-link [shareLink]="shareLink" [telemetryShareData]="telemetryShareData" *ngIf="shareLinkModal"
  (close)="closeSharePopup('close-share-link-popup')">
</app-share-link>



<!-- new UI -->
<div class="sb-bg-color-gray-0 textbook-container hide">
  <div class="ui container">
    <div class="textbook py-16 d-flex flex-ai-center">
      <div class="textbook__details d-flex flex-ai-center">
        <img src="./assets/images/book.png" class="textbook__bookimg" alt="textbook">
        <div class="ml-8 textbook__heading">
          <h5 class="textbook__title sb-color-primary font-weight-bold mb-0">TN X SCIENCE EM ALL ONE MARKS COLLECTIONS</h5>
          <div class="textbook__rating">
            <sui-rating class="star mini" [ngModel]="4" [maximum]="5"></sui-rating>
          </div>
        </div>
      </div>
      <button class="sb-btn sb-btn-secondary sb-btn-normal ml-auto textbook__addbtn">Add to Group</button>
    </div>
  </div>
</div>



