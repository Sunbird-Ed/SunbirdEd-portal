<!-- Mobile browser player-->
<div *ngIf="isMobileOrTab && !showNewPlayer" >
    <div data-ratio="16:9" class="player-thumbnail" appTelemetryInteract [telemetryInteractObject]="telemetryObject" [telemetryInteractEdata]="loadPlayerInteractEdata"
    [ngStyle]="{'background': 'url(' + playerOverlayImage + ') center/cover no-repeat '}" *ngIf="showPlayIcon" id="contentPlayer" tabindex="0" (click)="enablePlayer(false)">
    <img class="play-icon" src="assets/images/play_circle.svg">
  </div>
  <div id="playerFullscreen" *ngIf="!showPlayIcon" > 
    <!-- <img appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject" [telemetryInteractEdata]="closeButtonInteractEdata" (click)="closeFullscreen()" class="close-button" src="assets/images/close-Black.svg" alt=""> -->
    <iframe #contentIframe id="contentPlayer" title="Content Player" aria-label="Content Player" class="contentViewerIframeShadow" name="contentPlayer"></iframe>
  </div>
</div>
<!-- Portal player-->
<div class="h-100" *ngIf="!isMobileOrTab && !showNewPlayer && !isContentDeleted">
    <iframe #contentIframe id="contentPlayer" title="Content Player" aria-label="Content Player" class="contentViewerIframeShadow" [ngClass]="{'player-fullscreen': isFullScreenView}" name="contentPlayer"></iframe>
</div>
<div *ngIf="!isMobileOrTab && showNewPlayer && !isContentDeleted" class="w-100 h-100">
        <div class="contentViewerIframeShadow" [ngClass]="{'player-fullscreen content-full-video': isFullScreenView}">
        <sunbird-pdf-player *ngIf="playerType === 'pdf-player'" [playerConfig]="playerConfig"
          (playerEvent)="eventHandler($event)" (telemetryEvent)="generateContentReadEvent($event, true)">
        </sunbird-pdf-player>

        <sunbird-video-player *ngIf="playerType === 'video-player'" [playerConfig]="playerConfig"
          (playerEvent)="eventHandler($event)" (telemetryEvent)="generateContentReadEvent($event, true)">
        </sunbird-video-player>

        <sunbird-epub-player *ngIf="playerType === 'epub-player'" [playerConfig]="playerConfig" [showFullScreen]="isFullScreenView"
        (playerEvent)="eventHandler($event)" (telemetryEvent)="generateContentReadEvent($event, true)"></sunbird-epub-player>

        <quml-main-player *ngIf="playerType === 'quml-player' && showQumlPlayer" [playerConfig]="playerConfig" (playerEvent)="eventHandler($event)" (telemetryEvent)="generateContentReadEvent($event, true)"></quml-main-player>
      </div>
</div>

<!--If Content is deleted-->
<div class="d-flex flex-dc flex-jc-center text-center flex-ai-center no-content-player" *ngIf="isContentDeleted">
  <div class="no-content-player__text"></div>
  <div>
    <img src="assets/images/shape.svg" width="90px" height="70px">
  </div>
  <div class="fnormal">{{resourceService?.messages?.stmsg?.desktop?.deleteMessage}}</div>
</div>

<div *ngIf="isMobileOrTab && showNewPlayer" class="w-100 h-100">
  <div data-ratio="16:9" class="player-thumbnail" appTelemetryInteract [telemetryInteractObject]="telemetryObject" [telemetryInteractEdata]="loadPlayerInteractEdata"
  [ngStyle]="{'background': 'url(' + playerOverlayImage + ') center/cover no-repeat '}" *ngIf="showPlayIcon" id="contentPlayer" tabindex="0" (click)="enablePlayer(false)">
  <img class="play-icon" src="assets/images/play_circle.svg">
</div>

<div id="playerFullscreen" *ngIf="!showPlayIcon" class="player-fullscreen" [ngStyle]="{'display': mobileViewDisplay}"> 
  <!-- <img *ngIf="playerType !== 'quml-player'" appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject" [telemetryInteractEdata]="closeButtonInteractEdata" (click)="closeFullscreen()" class="close-button" src="assets/images/close-Black.svg" alt=""> -->
  <sunbird-pdf-player *ngIf="playerType === 'pdf-player'" [playerConfig]="playerConfig"
    (playerEvent)="eventHandler($event)" (telemetryEvent)="generateContentReadEvent($event, true)"></sunbird-pdf-player>

  <sunbird-video-player *ngIf="playerType === 'video-player'" [playerConfig]="playerConfig"
    (playerEvent)="eventHandler($event)" (telemetryEvent)="generateContentReadEvent($event, true)">
  </sunbird-video-player>
  <sunbird-epub-player *ngIf="playerType === 'epub-player'" [playerConfig]="playerConfig" [showFullScreen]="isFullScreenView"
    (playerEvent)="eventHandler($event)" (telemetryEvent)="generateContentReadEvent($event, true)"></sunbird-epub-player>

    <quml-main-player *ngIf="playerType === 'quml-player' && showQumlPlayer" [playerConfig]="playerConfig" (playerEvent)="eventHandler($event)" (telemetryEvent)="generateContentReadEvent($event, true)"></quml-main-player>
</div>
</div>

    <!--Rating popup -->
<app-content-rating #modal *ngIf="contentRatingModal && playerConfig"
    [contentData]="playerConfig.metadata" (closeModal)="closeModal()"></app-content-rating>
<button *ngIf="playerType !== 'quml-player'" class="sb-btn sb-btn-primary sb-btn-normal pull-right view-fullscreen"[ngClass]="{'d-none': !viewFullscreenBtn}" tabindex="0" (click)="viewInFullscreen()" appTelemetryInteract [telemetryInteractEdata]="viewFullScreenIntractEdata" [telemetryInteractObject]="viewFullScreenIntractObject"> <i class="expand icon"></i> View Full Screen</button>
<div *ngIf="metaData" class="ui divider mt-24"> </div>

<div *ngIf="metaData" class="collection-player-metadata sb-meta-data-container sb-meta-data-column d-flex flex-w-wrap mt-24">

  <dl class="sb-meta-data" *ngIf="metaData.author">
    <dt>{{resourceService?.frmelmnts?.lbl?.author}}</dt>
    <dd>{{metaData.author}}</dd>
  </dl>

  <dl class="sb-meta-data" *ngIf="metaData.medium">
    <dt>{{resourceService?.frmelmnts?.lbl?.medium | transposeTerms: 'frmelmnts.lbl.medium' : resourceService?.selectedLang}}</dt>
    <dd>{{metaData.medium}}</dd>
  </dl>

  <dl class="sb-meta-data" *ngIf="metaData.gradeLevel">
    <dt>{{resourceService?.frmelmnts?.lbl?.class | transposeTerms: 'frmelmnts.lbl.class' : resourceService?.selectedLang}}</dt>
    <dd>
      <span class="d-inline-block" *ngFor="let gradeLevel of metaData.gradeLevel; let isLast=last;">
        {{gradeLevel}}<span *ngIf="!isLast">,&nbsp;</span> 
      </span>
    </dd>
  </dl>

  <dl class="sb-meta-data" *ngIf="metaData.subject">
    <dt>{{resourceService?.frmelmnts?.lbl?.subject | transposeTerms: 'frmelmnts.lbl.subject': resourceService?.selectedLang}}</dt>
    <dd>{{metaData.subject}}</dd>
  </dl>

  <dl class="sb-meta-data" *ngIf="metaData.lastUpdatedOn">
    <dt>{{resourceService?.frmelmnts?.lbl?.lastupdate}}</dt>
    <dd>{{metaData.lastUpdatedOn | dateFormat: 'MMMM Do YYYY'}}</dd>
  </dl>

  <dl class="sb-meta-data" *ngIf="metaData.createdOn">
    <dt>{{resourceService?.frmelmnts?.lbl?.createdon}}</dt>
    <dd>{{metaData.createdOn | dateFormat: 'MMMM Do YYYY'}}</dd>
  </dl>

  <dl class="sb-meta-data">
      <dt>{{resourceService.frmelmnts?.lbl?.createdInstanceName  | interpolate:'{instance}': instance}}</dt>
      <dd *ngIf="metaData.creator">{{metaData.creator}}</dd>
  </dl>
  <dl class="sb-meta-data">
      <dt>{{resourceService.frmelmnts.lbl?.licenseTerms}}</dt>
      <dd *ngIf="metaData && !(metaData.licenseDetails && metaData.licenseDetails['name']) && metaData.license">{{metaData.license}}&#x200E;</dd>
      <dd *ngIf="metaData && metaData.licenseDetails && metaData.licenseDetails['name']">{{metaData.licenseDetails['name']}} {{metaData.licenseDetails['description']}}&#x200E; <br /><a href="{{metaData.licenseDetails['url']}}" target="_blank">{{metaData.licenseDetails['url']}}</a></dd>
  </dl>
  <dl class="sb-meta-data" *ngIf="metaData.orgDetails && metaData.orgDetails.orgName">
      <dt>{{resourceService.frmelmnts.lbl?.publishedOnInstanceName | interpolate:'{instance}': instance}}</dt>
      <dd>
          <span class="d-inline-block mr-20">{{metaData?.organisation?.join(', ')}}</span> &nbsp;
          <a ng-if="metaData.orgDetails?.email" href="mailto:{{metaData.orgDetails?.email}}?subject={{metaData.name}}">{{metaData.orgDetails?.email}}</a>
      </dd>
  </dl>
  <dl class="sb-meta-data">
      <dt>{{resourceService.frmelmnts?.lbl?.contentCredits}}</dt>
      <dd appTelemetryInteract [telemetryInteractObject]="getTelemetryInteractObject()" [telemetryInteractEdata]= "getTelemetryInteractEdata({id: 'view-credits'})">
          <a tabindex="0" (click)="showContentCreditsPopup()" title="{{resourceService.frmelmnts.lbl.contentCredits}}" class="cursor-pointer text-underline">{{resourceService.frmelmnts?.lbl?.view}}</a>
      </dd>
  </dl>
</div>

<div *ngIf="metaData && metaData.originData" class="ui divider my-24"></div>

<h4 *ngIf="metaData && metaData.originData" class="sb-section-title mb-16 d-block">{{resourceService.frmelmnts?.lbl?.contentcopiedtitle}}</h4>
<div *ngIf="metaData && metaData.originData" class="sb-meta-data-container sb-meta-data-column d-flex flex-w-wrap">
  <dl class="sb-meta-data" *ngIf="metaData.originData.name">
      <dt>{{resourceService.frmelmnts?.lbl?.contenttype}}</dt>
      <dd>{{metaData.originData.name}}</dd>
  </dl>
  <dl class="sb-meta-data" *ngIf="metaData.originData.author">
      <dt>{{resourceService.frmelmnts.lbl?.originalAuthor}}</dt>
      <dd *ngIf="metaData.creator">{{metaData.originData.author}}</dd>
  </dl>
  <dl class="sb-meta-data" *ngIf="metaData.originData.license">
      <dt>{{resourceService.frmelmnts.lbl?.licenseTerms}}</dt>
      <dd *ngIf="metaData.creator">{{metaData.originData.license}}&#x200E;</dd>
  </dl>
  <dl class="sb-meta-data" *ngIf="metaData.originData.organisation">
      <dt>{{resourceService.frmelmnts.lbl?.publishedOnInstanceName | interpolate:'{instance}': instance}}</dt>
      <dd>
          <span class="d-inline-block mr-20">{{metaData.originData.organisation.join(', ')}}</span> &nbsp;
          <a ng-if="metaData.orgDetails?.email" href="mailto:{{metaData.orgDetails?.email}}?subject={{metaData.name}}">{{metaData.originData.orgDetails?.email}}</a>
      </dd>
  </dl>
</div>

<app-content-credits [contentData]="metaData" *ngIf="showContentCreditsModal" (close)="showContentCreditsModal = false">
</app-content-credits>